import{a as F,aH as U,aJ as M,i as C,a1 as Q,a0 as x,l as H,o as S,e as I,x as a,v as t,f as u,bm as z,af as r,ag as i,N as h,Q as J,C as O,bv as G}from"./index-1be12f33.js";import{E as K,a as W}from"./el-table-column-dc4399ac.js";/* empty css                    *//* empty css                   */import"./el-scrollbar-e88d9e52.js";/* empty css                   */import{E as X}from"./el-image-viewer-3b7c41a4.js";/* empty css               */import{E as Y}from"./el-card-5ad8f211.js";import{E as Z,a as ee}from"./el-form-item-42e3e487.js";import{d as ae}from"./BaseUtils-4f69fbc4.js";import{b as te}from"./index-bffbdcbb.js";import{a as ne,d as le}from"./index-8b644642.js";import{h as oe}from"./index-505197ef.js";import"./index-21903205.js";import"./index-2fd01058.js";import"./isUndefined-aa0326a0.js";import"./index-3d8d28c9.js";import"./debounce-ed7538f7.js";import"./raf-f3e6aa40.js";import"./castArray-d3a408df.js";const ie={style:{margin:"0","text-align":"right"}},re={style:{margin:"0","text-align":"right"}},se=F({__name:"index",setup(N){const k=U(),{device:n}=M(),f=C([]);Q(()=>{_()});async function _(){let l=(await(n==null?void 0:n.getAllPackage())||[]).sort((p,d)=>p.label.localeCompare(d.label)).map((p,d)=>({index:d+1,...p}));f.value=l,y()}const c=x({searchStr:""}),b=C([]);function y(){let e=[];c.searchStr?e=f.value.filter(s=>s.packageName.includes(c.searchStr)||s.label.includes(c.searchStr)):e=f.value,b.value=e}const E=ae(y,200);H(()=>c.searchStr,function(e,s){E()});function A(){_()}function q(){c.searchStr="",_()}async function v(e){n==null||n.startPackage(e.packageName)}async function V(e){n==null||n.stopPackage(e.packageName)}async function D(e){n==null||n.clearPackage(e.packageName)}async function P(e){k.push({name:"AppInfo",query:{packageName:e.packageName}})}async function L(e){n==null||n.execCmd(`pm uninstall ${e.packageName}`)}async function R(e){const s=e.packageName,l=await(n==null?void 0:n.getPackageInfo(s)),p=l==null?void 0:l.applicationInfo.sourceDir,d=n==null?void 0:n.downloadUrl(p);te(d,`${s}.apk`)}return(e,s)=>{const l=O,p=Z,d=G,T=ee,$=Y,m=K,j=X,w=oe,B=W;return S(),I(J,null,[a($,null,{default:t(()=>[a(T,{inline:!0,model:u(c),class:"demo-form-inline"},{default:t(()=>[a(p,null,{default:t(()=>[a(l,{type:"primary",icon:u(z),onClick:A},{default:t(()=>[r(i(e.$t("shua-xin-ying-yong-lie-biao")),1)]),_:1},8,["icon"])]),_:1}),a(p,{label:e.$t("sou-suo")},{default:t(()=>[a(d,{modelValue:u(c).searchStr,"onUpdate:modelValue":s[0]||(s[0]=o=>u(c).searchStr=o),placeholder:e.$t("qing-shu-ru-bao-ming"),clearable:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(p,null,{default:t(()=>[a(l,{type:"primary",icon:u(z),onClick:q},{default:t(()=>[r(i(e.$t("zhong-zhi")),1)]),_:1},8,["icon"])]),_:1})]),_:1},8,["model"])]),_:1}),a($,{class:"mt-20px"},{default:t(()=>[a(B,{data:u(b),style:{width:"100%"}},{default:t(()=>[a(m,{prop:"index",label:"Id",width:"60"}),a(m,{prop:"icon",label:e.$t("tu-biao"),width:"80"},{default:t(o=>[a(j,{style:{width:"56px",height:"56px"},src:o.row.icon,fit:"cover"},null,8,["src"])]),_:1},8,["label"]),a(m,{prop:"label",label:e.$t("ming-cheng"),width:"150"},null,8,["label"]),a(m,{prop:"packageName",label:e.$t("bao-ming"),width:"240"},null,8,["label"]),a(m,{prop:"versionName",label:e.$t("ban-ben"),width:"240"},null,8,["label"]),a(m,{prop:"minSdkVersion",label:e.$t("zui-xiao-zhi-chi"),width:"100"},{default:t(o=>[r(i(u(ne)(o.row.minSdkVersion)),1)]),_:1},8,["label"]),a(m,{prop:"firstInstallTime",label:e.$t("chu-ci-an-zhuang-shi-jian"),width:"180"},{default:t(o=>[r(i(u(le)(o.row.firstInstallTime)),1)]),_:1},8,["label"]),a(m,{fixed:"right",label:e.$t("cao-zuo"),width:"450"},{default:t(o=>[a(l,{link:"",type:"primary",size:"small",onClick:g=>P(o.row)},{default:t(()=>[r(i(e.$t("cha-kan-xiang-qing")),1)]),_:2},1032,["onClick"]),a(l,{link:"",type:"success",size:"small",onClick:g=>v(o.row)},{default:t(()=>[r(i(e.$t("qi-dong")),1)]),_:2},1032,["onClick"]),a(l,{link:"",type:"warning",size:"small",onClick:g=>V(o.row)},{default:t(()=>[r(i(e.$t("ting-zhi")),1)]),_:2},1032,["onClick"]),a(w,{placement:"top",trigger:"click"},{reference:t(()=>[a(l,{link:"",type:"warning",size:"small"},{default:t(()=>[r(i(e.$t("qing-chu-shu-ju")),1)]),_:1})]),default:t(()=>[h("p",null,i(e.$t("que-ding-qing-chu-ci-ying-yong-shu-ju-ma")),1),h("div",ie,[a(l,{size:"small",type:"primary",onClick:g=>D(o.row)},{default:t(()=>[r(i(e.$t("que-ding")),1)]),_:2},1032,["onClick"])])]),_:2},1024),a(w,{placement:"top",trigger:"click"},{reference:t(()=>[a(l,{link:"",type:"danger",size:"small"},{default:t(()=>[r(i(e.$t("xie-zai")),1)]),_:1})]),default:t(()=>[h("p",null,i(e.$t("que-ding-xie-zai-ci-ying-yong-ma")),1),h("div",re,[a(l,{size:"small",type:"primary",onClick:g=>L(o.row)},{default:t(()=>[r(i(e.$t("que-ding")),1)]),_:2},1032,["onClick"])])]),_:2},1024),a(l,{link:"",type:"info",size:"small",onClick:g=>R(o.row)},{default:t(()=>[r(i(e.$t("dao-chu-apk")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])]),_:1})],64)}}}),pe={class:"app-container"},ve=Object.assign({name:"AppList",inheritAttrs:!1},{__name:"list",setup(N){return(k,n)=>{const f=se;return S(),I("div",pe,[a(f)])}}});export{ve as default};
