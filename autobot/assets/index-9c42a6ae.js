import{b as U,_ as I,a as P,j as se,u as Q,$ as oe,i as d,c as _,J as le,m as D,t as K,o as T,s as W,v as Z,a5 as re,N as $,n as B,f as m,h as j,a6 as ne,U as ie,b5 as ee,e as te,x as X,Q as ue,d as ce,al as C,I as Y,l as F,aa as ve,B as V,p as fe,a1 as de,a2 as me,bt as pe,r as he,O as be,g as ye,ae as ge,w as we,bh as Se}from"./index-f33ad1fa.js";import{B as Ee,r as ze,G as z}from"./el-scrollbar-e88d9e52.js";const ae=Symbol("scrollbarContextKey"),_e=U({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),He="Thumb",Ce=P({__name:"thumb",props:_e,setup(o){const t=o,l=se(ae),a=Q("scrollbar");l||oe(He,"can not inject scrollbar context");const i=d(),c=d(),n=d({}),f=d(!1);let r=!1,p=!1,h=ee?document.onselectstart:null;const s=_(()=>Ee[t.vertical?"vertical":"horizontal"]),y=_(()=>ze({size:t.size,move:t.move,bar:s.value})),g=_(()=>i.value[s.value.offset]**2/l.wrapElement[s.value.scrollSize]/t.ratio/c.value[s.value.offset]),w=u=>{var e;if(u.stopPropagation(),u.ctrlKey||[1,2].includes(u.button))return;(e=window.getSelection())==null||e.removeAllRanges(),O(u);const v=u.currentTarget;v&&(n.value[s.value.axis]=v[s.value.offset]-(u[s.value.client]-v.getBoundingClientRect()[s.value.direction]))},M=u=>{if(!c.value||!i.value||!l.wrapElement)return;const e=Math.abs(u.target.getBoundingClientRect()[s.value.direction]-u[s.value.client]),v=c.value[s.value.offset]/2,S=(e-v)*100*g.value/i.value[s.value.offset];l.wrapElement[s.value.scroll]=S*l.wrapElement[s.value.scrollSize]/100},O=u=>{u.stopImmediatePropagation(),r=!0,document.addEventListener("mousemove",R),document.addEventListener("mouseup",E),h=document.onselectstart,document.onselectstart=()=>!1},R=u=>{if(!i.value||!c.value||r===!1)return;const e=n.value[s.value.axis];if(!e)return;const v=(i.value.getBoundingClientRect()[s.value.direction]-u[s.value.client])*-1,S=c.value[s.value.offset]-e,H=(v-S)*100*g.value/i.value[s.value.offset];l.wrapElement[s.value.scroll]=H*l.wrapElement[s.value.scrollSize]/100},E=()=>{r=!1,n.value[s.value.axis]=0,document.removeEventListener("mousemove",R),document.removeEventListener("mouseup",E),L(),p&&(f.value=!1)},x=()=>{p=!1,f.value=!!t.size},A=()=>{p=!0,f.value=r};le(()=>{L(),document.removeEventListener("mouseup",E)});const L=()=>{document.onselectstart!==h&&(document.onselectstart=h)};return D(K(l,"scrollbarElement"),"mousemove",x),D(K(l,"scrollbarElement"),"mouseleave",A),(u,e)=>(T(),W(ie,{name:m(a).b("fade"),persisted:""},{default:Z(()=>[re($("div",{ref_key:"instance",ref:i,class:B([m(a).e("bar"),m(a).is(m(s).key)]),onMousedown:M},[$("div",{ref_key:"thumb",ref:c,class:B(m(a).e("thumb")),style:j(m(y)),onMousedown:w},null,38)],34),[[ne,u.always||f.value]])]),_:1},8,["name"]))}});var G=I(Ce,[["__file","thumb.vue"]]);const Te=U({always:{type:Boolean,default:!0},width:String,height:String,ratioX:{type:Number,default:1},ratioY:{type:Number,default:1}}),Be=P({__name:"bar",props:Te,setup(o,{expose:t}){const l=o,a=d(0),i=d(0);return t({handleScroll:n=>{if(n){const f=n.offsetHeight-z,r=n.offsetWidth-z;i.value=n.scrollTop*100/f*l.ratioY,a.value=n.scrollLeft*100/r*l.ratioX}}}),(n,f)=>(T(),te(ue,null,[X(G,{move:a.value,ratio:n.ratioX,size:n.width,always:n.always},null,8,["move","ratio","size","always"]),X(G,{move:i.value,ratio:n.ratioY,size:n.height,vertical:"",always:n.always},null,8,["move","ratio","size","always"])],64))}});var Re=I(Be,[["__file","bar.vue"]]);const Le=U({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:{type:Boolean,default:!1},wrapStyle:{type:ce([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20},id:String,role:String,ariaLabel:String,ariaOrientation:{type:String,values:["horizontal","vertical"]}}),Ne={scroll:({scrollTop:o,scrollLeft:t})=>[o,t].every(C)},ke="ElScrollbar",Pe=P({name:ke}),Me=P({...Pe,props:Le,emits:Ne,setup(o,{expose:t,emit:l}){const a=o,i=Q("scrollbar");let c,n;const f=d(),r=d(),p=d(),h=d("0"),s=d("0"),y=d(),g=d(1),w=d(1),M=_(()=>{const e={};return a.height&&(e.height=Y(a.height)),a.maxHeight&&(e.maxHeight=Y(a.maxHeight)),[a.wrapStyle,e]}),O=_(()=>[a.wrapClass,i.e("wrap"),{[i.em("wrap","hidden-default")]:!a.native}]),R=_(()=>[i.e("view"),a.viewClass]),E=()=>{var e;r.value&&((e=y.value)==null||e.handleScroll(r.value),l("scroll",{scrollTop:r.value.scrollTop,scrollLeft:r.value.scrollLeft}))};function x(e,v){ge(e)?r.value.scrollTo(e):C(e)&&C(v)&&r.value.scrollTo(e,v)}const A=e=>{C(e)&&(r.value.scrollTop=e)},L=e=>{C(e)&&(r.value.scrollLeft=e)},u=()=>{if(!r.value)return;const e=r.value.offsetHeight-z,v=r.value.offsetWidth-z,S=e**2/r.value.scrollHeight,H=v**2/r.value.scrollWidth,N=Math.max(S,a.minSize),k=Math.max(H,a.minSize);g.value=S/(e-S)/(N/(e-N)),w.value=H/(v-H)/(k/(v-k)),s.value=N+z<e?`${N}px`:"",h.value=k+z<v?`${k}px`:""};return F(()=>a.noresize,e=>{e?(c==null||c(),n==null||n()):({stop:c}=ve(p,u),n=D("resize",u))},{immediate:!0}),F(()=>[a.maxHeight,a.height],()=>{a.native||V(()=>{var e;u(),r.value&&((e=y.value)==null||e.handleScroll(r.value))})}),fe(ae,de({scrollbarElement:f,wrapElement:r})),me(()=>{a.native||V(()=>{u()})}),pe(()=>u()),t({wrapRef:r,update:u,scrollTo:x,setScrollTop:A,setScrollLeft:L,handleScroll:E}),(e,v)=>(T(),te("div",{ref_key:"scrollbarRef",ref:f,class:B(m(i).b())},[$("div",{ref_key:"wrapRef",ref:r,class:B(m(O)),style:j(m(M)),onScroll:E},[(T(),W(be(e.tag),{id:e.id,ref_key:"resizeRef",ref:p,class:B(m(R)),style:j(e.viewStyle),role:e.role,"aria-label":e.ariaLabel,"aria-orientation":e.ariaOrientation},{default:Z(()=>[he(e.$slots,"default")]),_:3},8,["id","class","style","role","aria-label","aria-orientation"]))],38),e.native?ye("v-if",!0):(T(),W(Re,{key:0,ref_key:"barRef",ref:y,height:s.value,width:h.value,always:e.always,"ratio-x":w.value,"ratio-y":g.value},null,8,["height","width","always","ratio-x","ratio-y"]))],2))}});var Oe=I(Me,[["__file","scrollbar.vue"]]);const De=we(Oe),b=new Map;let q;ee&&(document.addEventListener("mousedown",o=>q=o),document.addEventListener("mouseup",o=>{for(const t of b.values())for(const{documentHandler:l}of t)l(o,q)}));function J(o,t){let l=[];return Array.isArray(t.arg)?l=t.arg:Se(t.arg)&&l.push(t.arg),function(a,i){const c=t.instance.popperRef,n=a.target,f=i==null?void 0:i.target,r=!t||!t.instance,p=!n||!f,h=o.contains(n)||o.contains(f),s=o===n,y=l.length&&l.some(w=>w==null?void 0:w.contains(n))||l.length&&l.includes(f),g=c&&(c.contains(n)||c.contains(f));r||p||h||s||y||g||t.value(a,i)}}const We={beforeMount(o,t){b.has(o)||b.set(o,[]),b.get(o).push({documentHandler:J(o,t),bindingFn:t.value})},updated(o,t){b.has(o)||b.set(o,[]);const l=b.get(o),a=l.findIndex(c=>c.bindingFn===t.oldValue),i={documentHandler:J(o,t),bindingFn:t.value};a>=0?l.splice(a,1,i):l.push(i)},unmounted(o){b.delete(o)}};export{We as C,De as E};
